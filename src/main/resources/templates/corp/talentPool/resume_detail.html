<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ì´ë ¥ì„œ ìƒì„¸ë³´ê¸°</title>
        <th:block th:replace="~{fragments/external_file :: cdn_block}"></th:block>
        <link rel="stylesheet" th:href="@{/corp/talentPool/interviewOffer.css}"/>
        <link rel="stylesheet" th:href="@{/corp/talentPool/resume_detail.css}"/>
    <style>
       
    </style>
</head>
<body>
    <th:block th:replace="~{fragments/corpHeader :: corpHeader}"></th:block>
    <div class="container">
        <!-- ì™¼ìª½: ì´ë ¥ì„œ ë‚´ìš© ì˜ì—­ -->
		<div class="resume-section">
		    <!-- í”Œë ˆì´ìŠ¤í™€ë”ëŠ” ë‚´ìš© ì—†ì„ ë•Œë§Œ ë³´ì—¬ì¤Œ -->
		    <div class="resume-placeholder" th:if="${resume == null}">
		        ì´ë ¥ì„œê°€ ì—†ìŠµë‹ˆë‹¤.
		    </div>
		    	
		    	<div th:if="${resume != null}">
              	<div class="section">
				<div class="section-title">ê¸°ë³¸ì •ë³´</div>
				<div class="basic-info">
					<div class="profile-image">
<!-- 						<img th:src="@{/images/profileImg/{img}(img=${resume.image})}" alt="í”„ë¡œí•„ ì‚¬ì§„">
 -->
<img th:src="|${resume.image != null and !#strings.isEmpty(resume.image) ? '/images/profileImg/' + resume.image : '/images/default_img.png'}|">
 
 					</div>
					<div class="info-details">
						<div class="name" th:text="${resumeUser.name}"></div>
						<div class="contact-info">
							<div class="contact-item" th:text="|âœ‰ ${resumeUser.email}|"></div>
							<div class="phone-birth">
								<span th:text="|ğŸ“ ${resumeUser.phone}|"></span> 
								<span th:text="|ğŸ“… ${resumeUser.birth}|"></span>
							</div>
						</div>
					</div>
				</div>
				<br>
				<div>
					<div class="intro-question" th:if="${resume.introduction}" th:text="${resume.introduction}"></div>
					<div class="skills-interests" th:if="${!#lists.isEmpty(positions)}">
						<div class="skill-item">
							<h4>ê°œë°œ ì§ë¬´</h4>
							<th:block th:each="position : ${positions}">
								<span class="tag" th:text="${position.positionName}"></span>
							</th:block>
						</div>
					</div>
					<br>
					<div class="skills-interests">
						<div class="skill-item" th:if="${!#lists.isEmpty(skills)}">
							<h4>ê¸°ìˆ  ìŠ¤íƒ</h4>
							<th:block th:each="skill : ${skills}">
								<span class="tag" th:text="${skill.stackName}"></span>
							</th:block>
						</div>
					</div>
				</div>
			</div>

			<div class="section" th:if="${!#lists.isEmpty(educations)}">
				<div class="section-title">í•™ë ¥</div>
				<div class="timeline-item" th:each="education : ${educations}">
					<div class="timeline-date" th:text="|${education.graduateDate} ì¡¸ì—…|"></div>
					<div class="timeline-content">
						<h4 th:text="${education.schoolName}"></h4>
						<p>
							<span th:text="${education.educationType}"></span> | <span th:text="${education.department}"></span>
						</p>
						<p class="sub-info">
							<span th:text="${education.grade}"></span> / <span th:text="${education.standardGrade}"></span>
						</p>
					</div>
				</div>
			</div>

			<div class="section" th:if="${!#lists.isEmpty(careers)}">
				<div class="section-title">ê²½ë ¥(ì—…ë¬´ê²½í—˜)</div>
				<div class="timeline-item" th:each="career : ${careers}">
					<div class="timeline-date" th:text="|${career.startDate} - ${career.endDate}|"></div>
					<div class="timeline-content">
						<h4 th:text="${career.companyName}"></h4>
						<p th:text="${career.position}"></p>
						<p th:text="${career.careerDescription}"></p>
					</div>
				</div>
			</div>

			<div class="section" th:if="${!#lists.isEmpty(projects)}">
				<div class="section-title">í”„ë¡œì íŠ¸</div>
				<div class="timeline-item" th:each="project : ${projects}">
					<div class="timeline-date" th:text="|${project.startDate} - ${project.endDate}|"></div>
					<div class="timeline-content">
						<h4 th:text="${project.projectName}"></h4>
						<div class="project-details">
							<p>
							<th:block th:each="skills : ${project.projectSkills}">
								<span class="tag" th:text="${skills.stackName}"></span>
							</th:block>
							</p>
							<h5>ìƒì„¸ë‚´ìš©</h5>
							<p th:text="${project.projectContent}"></p>
							<h5>ì €ì¥ì†Œ ë§í¬</h5>
							<p th:text="${project.repositoryLink}"></p>
							<h5 th:if="${project.releaseStatus == 'Y'}">ë°°í¬ ì™„ë£Œ</h5>
						</div>
					</div>
				</div>
			</div>

			<div class="section" th:if="${!#lists.isEmpty(additionals)}">
				<div class="section-title">ê¸°íƒ€ì‚¬í•­</div>
				<div class="timeline-item" th:each="additional : ${additionals}">
					<div class="timeline-date" th:text="${additional.endDate}"></div>
					<div class="timeline-content">
						<h4 th:text="${additional.activityName}"></h4>
						<p>
							<span th:text="${additional.recordType}"></span> | <span th:text="${additional.relatedAgency}"></span>
						</p>
						<h4>ìƒì„¸ ë‚´ìš©</h4>
						<p th:text="${additional.detailContent}"></p>
					</div>
				</div>
			</div>

			<div class="section" th:if="${!#lists.isEmpty(introductions)}">
				<div class="section-title">ìê¸°ì†Œê°œì„œ</div>
				<div class="timeline-item" th:each="intro : ${introductions}">
					<div class="timeline-date" th:text="${intro.title}"></div>
					<br>
					<div th:text="${intro.content}"></div>
				</div>
			</div>

			<div class="section" th:if="${links != null and ((links.githubUrl != null and links.githubUrl != '') or (links.notionUrl != null and links.notionUrl != '') or (links.blogUrl != null and links.blogUrl != ''))}">
				<div class="section-title">ë§í¬</div>
				<div class="links-section">
					<div th:if="${links.githubUrl != null and links.githubUrl != ''}" style="margin-bottom: 20px;">
						<strong>Github</strong> <span th:text="${links.githubUrl}" style="margin-left: 50px;"></span>
					</div>
					<div th:if="${links.notionUrl != null and links.notionUrl != ''}" style="margin-bottom: 20px;">
						<strong>Notion</strong> <span th:text="${links.notionUrl}" style="margin-left: 50px;"></span>
					</div>
					<div th:if="${links.blogUrl != null and links.blogUrl != ''}" style="margin-bottom: 20px;">
						<strong>BLOG</strong> <span th:text="${links.blogUrl}" style="margin-left: 50px;"></span>
					</div>
				</div>
			</div>
            </div>
        </div>

        <!-- ì˜¤ë¥¸ìª½: ê³ ì • ì‚¬ì´ë“œë°” -->
        <div class="sidebar">
            <div class="sidebar-buttons">
                <button class="sidebar-btn position-btn openInterviewModalBtn">
                    <span class="btn-icon">ğŸ’¼</span>
                    <span class="btn-text">ë©´ì ‘ ì œì•ˆ</span>
                </button>
                
                <button class="sidebar-btn bookmark-btn" onclick="handleBookmark()">
                    <span class="btn-icon">â˜…</span>
                    <span class="btn-text">ìŠ¤í¬ë©</span>
                </button>
                
                <button class="sidebar-btn list-btn" onclick="handleGoBack()">
                    <span class="btn-icon">ğŸ“‹</span>
                    <span class="btn-text">ëª©ë¡ìœ¼ë¡œ</span>
                </button>
            </div>
        </div>
    </div>
   			<div class="modal" id="interviewModal" style="display:none;">
			  <div th:replace="~{fragments/interviewOffer.html :: modalContent }"></div> <!-- âœ… ì•ˆì „ -->
			</div>

    <script>
    document.querySelector('.openInterviewModalBtn').addEventListener('click', openModal);

    document.querySelectorAll('.interview-btn').forEach(button => {
    	  button.addEventListener('click', () => {
    	    openModal();
    	  });
    	});
    function openModal() {
        document.getElementById('interviewModal').style.display = 'block';
        document.body.style.overflow = 'hidden'; // ë°°ê²½ ìŠ¤í¬ë¡¤ ë°©ì§€
    }

    function closeModal() {
        document.getElementById('interviewModal').style.display = 'none';
        document.body.style.overflow = 'auto'; // ë°°ê²½ ìŠ¤í¬ë¡¤ ë³µì›
    }

    // ëª¨ë‹¬ ì™¸ë¶€ í´ë¦­ ì‹œ ë‹«ê¸°
    window.onclick = function(event) {
        const modal = document.getElementById('interviewModal');
        if (event.target === modal) {
            closeModal();
        }
    }

    // ESC í‚¤ë¡œ ëª¨ë‹¬ ë‹«ê¸°
    document.addEventListener('keydown', function(event) {
        if (event.key === 'Escape') {
            closeModal();
        }
    });
/*         // í¬ì§€ì…˜ ì œì•ˆ ë²„íŠ¼ í´ë¦­
        function handlePositionOffer() {
            const btn = document.querySelector('.position-btn');
            const originalContent = btn.innerHTML;
            
            // ë¡œë”© ìƒíƒœ
            btn.classList.add('btn-loading');
            btn.disabled = true;
            
            setTimeout(() => {
                btn.classList.remove('btn-loading');
                btn.disabled = false;
                btn.innerHTML = originalContent;
                
                // ì„±ê³µ íš¨ê³¼
                alert('í¬ì§€ì…˜ ì œì•ˆì„ ë³´ëƒˆìŠµë‹ˆë‹¤!');
            }, 1500);
        } */

        // ìŠ¤í¬ë© ë²„íŠ¼ í´ë¦­
		function handleBookmark() {
		    const btn = document.querySelector('.bookmark-btn');
		    const icon = btn.querySelector('.btn-icon');
		    const text = btn.querySelector('.btn-text');
		
		    if (btn.classList.contains('active')) {
		        // ìŠ¤í¬ë© ì·¨ì†Œ
		        btn.classList.remove('active');
		        // ì•„ì´ì½˜ í…ìŠ¤íŠ¸ëŠ” ê·¸ëŒ€ë¡œ 'â­' ìœ ì§€
		        // text.textContent = 'ìŠ¤í¬ë©';  <-- ì‚­ì œ ë˜ëŠ” ì£¼ì„ ì²˜ë¦¬
		
		        btn.style.transform = 'scale(0.95)';
		        setTimeout(() => {
		            btn.style.transform = 'scale(1)';
		        }, 150);
		
		        showToast('ìŠ¤í¬ë©ì„ ì·¨ì†Œí–ˆìŠµë‹ˆë‹¤.');
		    } else {
		        // ìŠ¤í¬ë© ì¶”ê°€
		        btn.classList.add('active');
		        // ì•„ì´ì½˜ í…ìŠ¤íŠ¸ëŠ” ê·¸ëŒ€ë¡œ 'â­' ìœ ì§€
		        // text.textContent = 'ìŠ¤í¬ë©ë¨';  <-- ì‚­ì œ ë˜ëŠ” ì£¼ì„ ì²˜ë¦¬
		
		        btn.style.transform = 'scale(1.05)';
		        setTimeout(() => {
		            btn.style.transform = 'scale(1)';
		        }, 150);
		
		        showToast('ì´ë ¥ì„œë¥¼ ìŠ¤í¬ë©í–ˆìŠµë‹ˆë‹¤!');
		    }
		}

        // ëª©ë¡ìœ¼ë¡œ ëŒì•„ê°€ê¸°
		function handleGoBack() {
		    const btn = document.querySelector('.list-btn');
		
		    // ë¸Œë¼ìš°ì € íˆìŠ¤í† ë¦¬ ë’¤ë¡œ ê°€ê¸°
		    window.history.back();
		}


        // í† ìŠ¤íŠ¸ ë©”ì‹œì§€ í‘œì‹œ
        function showToast(message) {
            // ê¸°ì¡´ í† ìŠ¤íŠ¸ ì œê±°
            const existingToast = document.querySelector('.toast');
            if (existingToast) {
                existingToast.remove();
            }
            
            // ìƒˆ í† ìŠ¤íŠ¸ ìƒì„±
            const toast = document.createElement('div');
            toast.className = 'toast';
            toast.textContent = message;
            toast.style.cssText = `
                position: fixed;
                top: 20px;
                left: 50%;
                transform: translateX(-50%);
                background: rgba(0, 0, 0, 0.8);
                color: white;
                padding: 12px 24px;
                border-radius: 25px;
                font-size: 14px;
                z-index: 10000;
                animation: toastSlideIn 0.3s ease-out;
            `;
            
            // í† ìŠ¤íŠ¸ ì• ë‹ˆë©”ì´ì…˜ ìŠ¤íƒ€ì¼ ì¶”ê°€
            const style = document.createElement('style');
            style.textContent = `
                @keyframes toastSlideIn {
                    from {
                        opacity: 0;
                        transform: translateX(-50%) translateY(-20px);
                    }
                    to {
                        opacity: 1;
                        transform: translateX(-50%) translateY(0);
                    }
                }
                @keyframes toastSlideOut {
                    from {
                        opacity: 1;
                        transform: translateX(-50%) translateY(0);
                    }
                    to {
                        opacity: 0;
                        transform: translateX(-50%) translateY(-20px);
                    }
                }
            `;
            
            document.head.appendChild(style);
            document.body.appendChild(toast);
            
            // 3ì´ˆ í›„ ì œê±°
            setTimeout(() => {
                toast.style.animation = 'toastSlideOut 0.3s ease-out';
                setTimeout(() => {
                    toast.remove();
                    style.remove();
                }, 300);
            }, 3000);
        }

        // í˜ì´ì§€ ë¡œë“œ ì• ë‹ˆë©”ì´ì…˜
        window.addEventListener('load', () => {
            document.body.style.opacity = '1';
        });
    </script>
    	<th:block th:replace="~{fragments/corpFooter :: corpFooter}"></th:block>
</body>
</html>