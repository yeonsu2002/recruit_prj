<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>ë¡œê·¸ì¸ í˜ì´ì§€</title>
<th:block th:replace="~{fragments/external_file :: cdn_block}"></th:block>
<link rel="stylesheet" th:href="@{/login/login_form.css}" >
<script type="text/javascript">
$(function(){
	// íƒ­ ì „í™˜ ê¸°ëŠ¥
	document.querySelectorAll('.tab').forEach(tab => {
		tab.addEventListener('click', function() {
	    // ëª¨ë“  íƒ­ì—ì„œ active í´ë˜ìŠ¤ ì œê±° (ìœ„ì—ì„œëŠ” ê°œì¸íšŒì›, ê¸°ì—…íšŒì› ë‘ê°œë¿)
	    document.querySelectorAll('.tab').forEach(t => t.classList.remove('active'));
	    // í´ë¦­í•œ íƒ­ì— active í´ë˜ìŠ¤ ì¶”ê°€
	    this.classList.add('active');
    });
	});
	
	// í¼ ì œì¶œ ì²˜ë¦¬ ( -> ajaxë¡œ ì²˜ë¦¬ì¤‘ )
	/*
	document.querySelector('form').addEventListener('submit', function(e) {
	  e.preventDefault(); // ê¸°ë³¸ ì œì¶œ ë™ì‘ ë°©ì§€
		if($(".user-type").hasClass("active")){
			alert("ê°œì¸íšŒì› í¼ ì „ì†¡");
			document.getElementById("frm").action = "/user/login";
			document.getElementById("frm").submit();
			
		}
	  if($(".corp-type").hasClass("active")){
		  alert("ê¸°ì—…íšŒì› í¼ ì „ì†¡");
			document.getElementById("frm").action = "/corp/login";
			document.getElementById("frm").submit();
	  }
	});
	*/
	
	//login ajax(loginProcess()) ë²„íŠ¼ì— ì—°ê²° 
	document.getElementById('loginBtn').addEventListener('click', function(){
		let email = document.getElementById('email').value;
		let password = document.getElementById('password').value;
		loginProcess(email, password);
	});

	
	
});

/* ì¼ë°˜ìœ ì €, ê¸°ì—…ìœ ì € íšŒì›ê°€ì… í˜ì´ì§€ URLë™ì  ì„¤ì • */
function joinPageForm(){
	let url = '/user/join';
	if($(".corp-type").hasClass("active")){
		url = '/corp/join';
	}
	location.href=url;
}



//ë¡œê·¸ì¸ Ajax
//@ResponseBodyë¥¼ ê±¸ë©´, returnê°’ì´ ViewResolver, htmlì´ í•„ìš”ì—†ê³  ê·¸ ê°’ì´ ë°”ë¡œ í´ë¼ìª½ìœ¼ë¡œ ì‘ë‹µëœë‹¤.
//JSON ì‘ë‹µì´ í•œê¸€ì¸ë° ê¹¨ì§€ë©´, @RequestMapping() ì•ˆì— produces = "applicatioin/json;charset=UTF-8" ì…ë ¥ 
function loginProcess(email, password){
	let corpType = document.queurySelector(".corp-type");
	let url = '/user/loginProcess';
	if(!corpType.hassClass("active")){
		url = '/corp/loginProcess';
	}
	console.log(url + " / " + email + " / " + password);
/* 
	$.ajax({
		url:"/user/loginProcess",
		type:"post",
		dataType:"json",
		data: {
			email : email,
			password : password
		},
		success:function(JsonObject){
			
		},
		error:function(){
			
		}
	});
	 */
	
}

</script>
</head>
<body>
	
	<!-- ê°€ì…ìœ¼ë¡œ redirectì™”ì„ ë•Œ Flashì‚¬ìš© -->
	<div th:if="${msg}" class="alert alert-success" role="alert">
		<p th:text=${msg}></p>
	</div>

	<div class="login-container">
		<!-- íƒ­ ë©”ë‰´ -->
		<div class="tab-container">
			<div class="tab-menu">
				<div class="user-type tab active">ê°œì¸íšŒì›</div>
				<div class="corp-type tab">ê¸°ì—…íšŒì›</div>
			</div>
		</div>

		<!-- ë¡œê·¸ì¸ í¼ì„ í…Œì´ë¸”ë¡œ êµ¬ì„± -->
		<form th:action="@{/void}" method="post" id="frm">
			<table class="login-table">
				<tr>
					<td><input type="email" id="email" name="email" class="input-field" placeholder="ì´ë©”ì¼" required></td>
				</tr>
				<tr>
					<td><input type="password" id="password" name="password" class="input-field" placeholder="ë¹„ë°€ë²ˆí˜¸" required></td>
				</tr>
				<tr>
					<td>
						<div class="checkbox-container">
							<div class="checkbox-item">
								<input type="checkbox" id="remember"> <label
									for="remember">ë¡œê·¸ì¸ ìœ ì§€</label>
							</div>
							<div class="checkbox-item">
								<input type="checkbox" id="autofill"> <label
									for="autofill">ì•„ì´ë”” ì €ì¥</label>
							</div>
						</div>
					</td>
				</tr>
				<tr>
					<td>
						<button type="button" id="loginBtn" class="login-button">ë¡œê·¸ì¸</button>
					</td>
				</tr>
			</table>
		</form>

		<div class="bottom-links">
			<a href="#" onclick="alert('ì•„ì´ë”” ì°¾ê¸° ê¸°ëŠ¥')">ì•„ì´ë”” ì°¾ê¸°</a> 
			<span>|</span> 
			<a href="#" onclick="alert('ë¹„ë°€ë²ˆí˜¸ ì°¾ê¸° ê¸°ëŠ¥')">ë¹„ë°€ë²ˆí˜¸ ì°¾ê¸°</a>
			<span>|</span> 
			<a href="#" onclick="joinPageForm()">íšŒì›ê°€ì…</a>
		</div>

		<div class="social-login">
			<div class="social-login-text">ì†Œì…œ ê³„ì •ìœ¼ë¡œ ê°„í¸ ë¡œê·¸ì¸</div>
			<div class="social-buttons">
				<button class="social-button naver" onclick="alert('ë„¤ì´ë²„ ë¡œê·¸ì¸')">N</button>
				<button class="social-button kakao" onclick="alert('ì¹´ì¹´ì˜¤ ë¡œê·¸ì¸')">ğŸ’¬</button>
				<button class="social-button google" onclick="alert('êµ¬ê¸€ ë¡œê·¸ì¸')">G</button>
				<button class="social-button facebook" onclick="alert('í˜ì´ìŠ¤ë¶ ë¡œê·¸ì¸')">f</button>
				<button class="social-button apple" onclick="alert('ì• í”Œ ë¡œê·¸ì¸')">ğŸ</button>
			</div>
		</div>
	</div>

</body>
</html>